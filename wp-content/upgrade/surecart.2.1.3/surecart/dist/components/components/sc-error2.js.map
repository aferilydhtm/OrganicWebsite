{"file":"sc-error2.js","mappings":";;;;;;;;;;;;;;;;;;;;;;;aAsCa,UAAE;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;","names":[],"sources":["./src/components/ui/error/sc-error.tsx"],"sourcesContent":["import { Component, h, Event, EventEmitter, Listen, Watch, Prop } from '@stencil/core';\nimport { __ } from '@wordpress/i18n';\nimport { ResponseError } from '../../../types';\n\n/**\n * @part base - The elements base wrapper.\n * @part icon - The alert icon.\n * @part text - The alert text.\n * @part title - The alert title.\n * @part message - The alert message.\n * @part close - The close icon.\n */\n@Component({\n  tag: 'sc-error',\n  shadow: true,\n})\nexport class ScFormErrorProvider {\n  /** Set the state. */\n  @Event() scUpdateError: EventEmitter<ResponseError>;\n\n  /** Error to display. */\n  @Prop() error: ResponseError | null;\n\n  /** Trigger the error event when an error happens  */\n  @Watch('error')\n  handleErrorUpdate(val) {\n    this.scUpdateError.emit(val);\n  }\n\n  /** Listen for error events in component. */\n  @Listen('scError')\n  handleErrorEvent(e) {\n    this.error = e.detail as ResponseError;\n  }\n\n  /** This filters the error message with some more client friendly error messages. */\n  getErrorMessage(error) {\n    if (error.code === 'order.line_items.price.blank') {\n      return __('This product is no longer purchasable.', 'surecart');\n    }\n    return error?.message;\n  }\n\n  /** First will display validation error, then main error if no validation errors. */\n  errorMessage() {\n    if (this.error?.additional_errors?.[0]?.message) {\n      return this.getErrorMessage(this.error?.additional_errors?.[0]);\n    } else if (this?.error?.message) {\n      return this.getErrorMessage(this?.error);\n    }\n    return '';\n  }\n\n  render() {\n    return !!this.errorMessage() ? (\n      <sc-alert exportparts=\"base, icon, text, title, message, close\" type=\"danger\" scrollOnOpen={true} open={!!this.errorMessage()}>\n        <span slot=\"title\">{this.errorMessage()}</span>\n      </sc-alert>\n    ) : null;\n  }\n}\n"],"version":3}