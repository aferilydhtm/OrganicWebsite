{"file":"sc-product-price-modal.js","mappings":";;;;;;;;;;;;;AAAA,MAAM,sBAAsB,GAAG,gcAAgc;;;;;;;;;;;;;;;;;;;;;;;;;miBC2Ctb,UAAE;;;q1BAsBX,UAAE;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;","names":[],"sources":["./src/components/controllers/product/sc-product-price-modal/sc-product-price-modal.scss?tag=sc-product-price-modal&encapsulation=shadow","./src/components/controllers/product/sc-product-price-modal/sc-product-price-modal.tsx"],"sourcesContent":[":host {\n  display: block;\n}\n\nsc-dialog {\n  --body-spacing: var(--sc-spacing-xx-large);\n  color: var(--sc-color-gray-600);\n  text-decoration: none;\n  font-size: 16px;\n}\n\n.dialog {\n  &__header {\n    display: flex;\n    align-items: center;\n    gap: var(--sc-spacing-medium);\n  }\n\n  &__header-text {\n    line-height: var(--sc-line-height-dense);\n  }\n\n  &__image {\n    img {\n      width: 60px;\n      height: 60px;\n      display: block;\n    }\n  }\n\n  &__action {\n    font-weight: var(--sc-font-weight-bold);\n  }\n\n  &__product-name {\n    font-size: var(--sc-font-size-small);\n  }\n}\n","import { Component, Element, h, Prop } from '@stencil/core';\nimport { onChange, state } from '@store/product';\nimport { __ } from '@wordpress/i18n';\n\nimport { submitCartForm } from '@store/product/mutations';\n\n@Component({\n  tag: 'sc-product-price-modal',\n  styleUrl: 'sc-product-price-modal.scss',\n  shadow: true,\n})\nexport class ScProductPriceModal {\n  @Element() el: HTMLScProductBuyButtonElement;\n\n  private priceInput: HTMLScPriceInputElement;\n\n  @Prop() buttonText: string;\n\n  componentWillLoad() {\n    // focus on price input when opened.\n    onChange('dialog', val => {\n      if (val === 'ad_hoc') {\n        setTimeout(() => {\n          this.priceInput?.triggerFocus();\n        }, 50);\n      }\n    });\n  }\n\n  render() {\n    if (!state?.selectedPrice?.ad_hoc) {\n      return null;\n    }\n\n    return (\n      <sc-dialog open={state.dialog === 'ad_hoc'} onScRequestClose={() => (state.dialog = null)}>\n        <span class=\"dialog__header\" slot=\"label\">\n          {!!state?.product?.image_url && (\n            <div class=\"dialog__image\">\n              <img src={state?.product?.image_url} />\n            </div>\n          )}\n          <div class=\"dialog__header-text\">\n            <div class=\"dialog__action\">{__('Enter An Amount', 'surecart')}</div>\n            <div class=\"dialog__product-name\">{state?.product?.name}</div>\n          </div>\n        </span>\n\n        <sc-form\n          onScSubmit={e => {\n            e.stopImmediatePropagation();\n            submitCartForm();\n          }}\n          onScFormSubmit={e => e.stopImmediatePropagation()}\n        >\n          <sc-price-input\n            ref={el => (this.priceInput = el as HTMLScPriceInputElement)}\n            value={state.adHocAmount?.toString?.()}\n            currency-code={state?.selectedPrice?.currency}\n            min={state?.selectedPrice?.ad_hoc_min_amount}\n            max={state?.selectedPrice?.ad_hoc_max_amount}\n            onScInput={e => (state.adHocAmount = parseInt(e.target.value))}\n            required\n          />\n          <sc-button type=\"primary\" full submit busy={state.busy}>\n            {this.buttonText || __('Add To Cart', 'surecart')}\n          </sc-button>\n        </sc-form>\n      </sc-dialog>\n    );\n  }\n}\n"],"version":3}