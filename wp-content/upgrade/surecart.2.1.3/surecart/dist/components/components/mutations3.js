import{d as addLineItem}from"./index3.js";import{s as state}from"./watchers.js";import{b as getCheckout,h as setCheckout}from"./watchers2.js";import{t as toggleCart}from"./ui.js";const submitCartForm=async()=>{var t,e,a,o,s;if((null===(t=state.selectedPrice)||void 0===t?void 0:t.id)&&(!(null===(e=state.selectedPrice)||void 0===e?void 0:e.ad_hoc)||state.adHocAmount))try{state.busy=!0;const t=await addLineItem({checkout:getCheckout(null==state?void 0:state.formId,state.mode),data:{price:null===(a=state.selectedPrice)||void 0===a?void 0:a.id,...(null===(o=state.selectedPrice)||void 0===o?void 0:o.ad_hoc)?{ad_hoc_amount:state.adHocAmount}:{},quantity:(null===(s=state.selectedPrice)||void 0===s?void 0:s.ad_hoc)?1:state.quantity},live_mode:"test"!==state.mode});setCheckout(t,state.formId),toggleCart(!0),state.dialog=null}catch(t){console.error(t),state.error=t}finally{state.busy=!1}};export{submitCartForm as s};