import{addLineItem}from"../../services/session";import state from"./store";import{getCheckout,setCheckout}from"@store/checkouts";import{toggleCart}from"@store/ui";export const submitCartForm=async()=>{var t,e,o,s,a;if((null===(t=state.selectedPrice)||void 0===t?void 0:t.id)&&(!(null===(e=state.selectedPrice)||void 0===e?void 0:e.ad_hoc)||state.adHocAmount))try{state.busy=!0;const t=await addLineItem({checkout:getCheckout(null==state?void 0:state.formId,state.mode),data:{price:null===(o=state.selectedPrice)||void 0===o?void 0:o.id,...(null===(s=state.selectedPrice)||void 0===s?void 0:s.ad_hoc)?{ad_hoc_amount:state.adHocAmount}:{},quantity:(null===(a=state.selectedPrice)||void 0===a?void 0:a.ad_hoc)?1:state.quantity},live_mode:"test"!==state.mode});setCheckout(t,state.formId),toggleCart(!0),state.dialog=null}catch(t){console.error(t),state.error=t}finally{state.busy=!1}};