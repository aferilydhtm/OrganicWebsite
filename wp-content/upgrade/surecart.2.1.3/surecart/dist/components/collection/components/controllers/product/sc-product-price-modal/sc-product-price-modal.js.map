{"version":3,"file":"sc-product-price-modal.js","sourceRoot":"","sources":["../../../../../src/components/controllers/product/sc-product-price-modal/sc-product-price-modal.tsx"],"names":[],"mappings":"AAAA,OAAO,EAAE,SAAS,EAAE,OAAO,EAAE,CAAC,EAAE,IAAI,EAAE,MAAM,eAAe,CAAC;AAC5D,OAAO,EAAE,QAAQ,EAAE,KAAK,EAAE,MAAM,gBAAgB,CAAC;AACjD,OAAO,EAAE,EAAE,EAAE,MAAM,iBAAiB,CAAC;AAErC,OAAO,EAAE,cAAc,EAAE,MAAM,0BAA0B,CAAC;AAO1D,MAAM,OAAO,mBAAmB;;;;EAO9B,iBAAiB;IACf,oCAAoC;IACpC,QAAQ,CAAC,QAAQ,EAAE,GAAG,CAAC,EAAE;MACvB,IAAI,GAAG,KAAK,QAAQ,EAAE;QACpB,UAAU,CAAC,GAAG,EAAE;;UACd,MAAA,IAAI,CAAC,UAAU,0CAAE,YAAY,EAAE,CAAC;QAClC,CAAC,EAAE,EAAE,CAAC,CAAC;OACR;IACH,CAAC,CAAC,CAAC;EACL,CAAC;EAED,MAAM;;IACJ,IAAI,CAAC,CAAA,MAAA,KAAK,aAAL,KAAK,uBAAL,KAAK,CAAE,aAAa,0CAAE,MAAM,CAAA,EAAE;MACjC,OAAO,IAAI,CAAC;KACb;IAED,OAAO,CACL,iBAAW,IAAI,EAAE,KAAK,CAAC,MAAM,KAAK,QAAQ,EAAE,gBAAgB,EAAE,GAAG,EAAE,CAAC,CAAC,KAAK,CAAC,MAAM,GAAG,IAAI,CAAC;MACvF,YAAM,KAAK,EAAC,gBAAgB,EAAC,IAAI,EAAC,OAAO;QACtC,CAAC,CAAC,CAAA,MAAA,KAAK,aAAL,KAAK,uBAAL,KAAK,CAAE,OAAO,0CAAE,SAAS,CAAA,IAAI,CAC9B,WAAK,KAAK,EAAC,eAAe;UACxB,WAAK,GAAG,EAAE,MAAA,KAAK,aAAL,KAAK,uBAAL,KAAK,CAAE,OAAO,0CAAE,SAAS,GAAI,CACnC,CACP;QACD,WAAK,KAAK,EAAC,qBAAqB;UAC9B,WAAK,KAAK,EAAC,gBAAgB,IAAE,EAAE,CAAC,iBAAiB,EAAE,UAAU,CAAC,CAAO;UACrE,WAAK,KAAK,EAAC,sBAAsB,IAAE,MAAA,KAAK,aAAL,KAAK,uBAAL,KAAK,CAAE,OAAO,0CAAE,IAAI,CAAO,CAC1D,CACD;MAEP,eACE,UAAU,EAAE,CAAC,CAAC,EAAE;UACd,CAAC,CAAC,wBAAwB,EAAE,CAAC;UAC7B,cAAc,EAAE,CAAC;QACnB,CAAC,EACD,cAAc,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,wBAAwB,EAAE;QAEjD,sBACE,GAAG,EAAE,EAAE,CAAC,EAAE,CAAC,CAAC,IAAI,CAAC,UAAU,GAAG,EAA6B,CAAC,EAC5D,KAAK,EAAE,MAAA,MAAA,KAAK,CAAC,WAAW,0CAAE,QAAQ,kDAAI,mBACvB,MAAA,KAAK,aAAL,KAAK,uBAAL,KAAK,CAAE,aAAa,0CAAE,QAAQ,EAC7C,GAAG,EAAE,MAAA,KAAK,aAAL,KAAK,uBAAL,KAAK,CAAE,aAAa,0CAAE,iBAAiB,EAC5C,GAAG,EAAE,MAAA,KAAK,aAAL,KAAK,uBAAL,KAAK,CAAE,aAAa,0CAAE,iBAAiB,EAC5C,SAAS,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,KAAK,CAAC,WAAW,GAAG,QAAQ,CAAC,CAAC,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC,EAC9D,QAAQ,SACR;QACF,iBAAW,IAAI,EAAC,SAAS,EAAC,IAAI,QAAC,MAAM,QAAC,IAAI,EAAE,KAAK,CAAC,IAAI,IACnD,IAAI,CAAC,UAAU,IAAI,EAAE,CAAC,aAAa,EAAE,UAAU,CAAC,CACvC,CACJ,CACA,CACb,CAAC;EACJ,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;CACF","sourcesContent":["import { Component, Element, h, Prop } from '@stencil/core';\nimport { onChange, state } from '@store/product';\nimport { __ } from '@wordpress/i18n';\n\nimport { submitCartForm } from '@store/product/mutations';\n\n@Component({\n  tag: 'sc-product-price-modal',\n  styleUrl: 'sc-product-price-modal.scss',\n  shadow: true,\n})\nexport class ScProductPriceModal {\n  @Element() el: HTMLScProductBuyButtonElement;\n\n  private priceInput: HTMLScPriceInputElement;\n\n  @Prop() buttonText: string;\n\n  componentWillLoad() {\n    // focus on price input when opened.\n    onChange('dialog', val => {\n      if (val === 'ad_hoc') {\n        setTimeout(() => {\n          this.priceInput?.triggerFocus();\n        }, 50);\n      }\n    });\n  }\n\n  render() {\n    if (!state?.selectedPrice?.ad_hoc) {\n      return null;\n    }\n\n    return (\n      <sc-dialog open={state.dialog === 'ad_hoc'} onScRequestClose={() => (state.dialog = null)}>\n        <span class=\"dialog__header\" slot=\"label\">\n          {!!state?.product?.image_url && (\n            <div class=\"dialog__image\">\n              <img src={state?.product?.image_url} />\n            </div>\n          )}\n          <div class=\"dialog__header-text\">\n            <div class=\"dialog__action\">{__('Enter An Amount', 'surecart')}</div>\n            <div class=\"dialog__product-name\">{state?.product?.name}</div>\n          </div>\n        </span>\n\n        <sc-form\n          onScSubmit={e => {\n            e.stopImmediatePropagation();\n            submitCartForm();\n          }}\n          onScFormSubmit={e => e.stopImmediatePropagation()}\n        >\n          <sc-price-input\n            ref={el => (this.priceInput = el as HTMLScPriceInputElement)}\n            value={state.adHocAmount?.toString?.()}\n            currency-code={state?.selectedPrice?.currency}\n            min={state?.selectedPrice?.ad_hoc_min_amount}\n            max={state?.selectedPrice?.ad_hoc_max_amount}\n            onScInput={e => (state.adHocAmount = parseInt(e.target.value))}\n            required\n          />\n          <sc-button type=\"primary\" full submit busy={state.busy}>\n            {this.buttonText || __('Add To Cart', 'surecart')}\n          </sc-button>\n        </sc-form>\n      </sc-dialog>\n    );\n  }\n}\n"]}