{"version":3,"file":"sc-order-coupon-form.js","sourceRoot":"","sources":["../../../../../src/components/controllers/checkout-form/order-coupon-form/sc-order-coupon-form.tsx"],"names":[],"mappings":"AAAA,OAAO,EAAE,SAAS,EAAE,KAAK,EAAE,CAAC,EAAE,KAAK,EAAE,IAAI,EAAE,KAAK,EAAgB,MAAM,eAAe,CAAC;AAEtF,OAAO,EAAE,YAAY,EAAE,MAAM,kBAAkB,CAAC;AAChD,OAAO,EAAE,EAAE,EAAE,MAAM,iBAAiB,CAAC;AACrC,OAAO,EAAE,KAAK,EAAE,MAAM,kCAAkC,CAAC;AAOzD,MAAM,OAAO,iBAAiB;;;;;;;;;;;;;;EAiB5B,kBAAkB;;IAChB,MAAM,KAAK,GAAG,CAAC,CAAA,MAAA,IAAI,aAAJ,IAAI,uBAAJ,IAAI,CAAE,KAAK,0CAAE,iBAAiB,KAAI,EAAE,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC,EAAE,WAAC,OAAA,CAAA,MAAA,KAAK,aAAL,KAAK,uBAAL,KAAK,CAAE,IAAI,0CAAE,SAAS,MAAK,yBAAyB,CAAA,EAAA,CAAC,CAAC;IACzH,IAAI,CAAC,YAAY,GAAG,CAAA,KAAK,aAAL,KAAK,uBAAL,KAAK,CAAE,OAAO,EAAC,CAAC,CAAC,KAAK,aAAL,KAAK,uBAAL,KAAK,CAAE,OAAO,CAAC,CAAC,CAAC,EAAE,CAAC;EAC3D,CAAC;EAED,MAAM;;IACJ,OAAO,CACL,sBACE,KAAK,EAAE,IAAI,CAAC,KAAK,IAAI,EAAE,CAAC,iBAAiB,EAAE,UAAU,CAAC,EACtD,SAAS,EAAE,IAAI,CAAC,SAAS,EACzB,WAAW,EAAE,IAAI,CAAC,WAAW,EAC7B,OAAO,EAAE,IAAI,CAAC,IAAI,IAAI,CAAC,CAAA,MAAA,MAAA,MAAA,IAAI,CAAC,KAAK,0CAAE,UAAU,0CAAE,IAAI,0CAAE,MAAM,CAAA,EAC3D,IAAI,EAAE,IAAI,CAAC,IAAI,EACf,KAAK,EAAE,IAAI,CAAC,YAAY,EACxB,QAAQ,EAAE,MAAA,IAAI,aAAJ,IAAI,uBAAJ,IAAI,CAAE,KAAK,0CAAE,QAAQ,EAC/B,QAAQ,EAAE,MAAA,IAAI,aAAJ,IAAI,uBAAJ,IAAI,CAAE,KAAK,0CAAE,QAAQ,qBACd,MAAA,IAAI,aAAJ,IAAI,uBAAJ,IAAI,CAAE,KAAK,0CAAE,eAAe,EAC7C,KAAK,EAAE;QACL,2BAA2B,EAAE,KAAK,EAAE;OACrC,iBACY,IAAI,CAAC,UAAU,IAAI,EAAE,CAAC,OAAO,EAAE,UAAU,CAAC,GACvC,CACnB,CAAC;EACJ,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;CACF;AAED,YAAY,CAAC,iBAAiB,EAAE,CAAC,SAAS,EAAE,MAAM,EAAE,OAAO,EAAE,OAAO,CAAC,EAAE,KAAK,CAAC,CAAC","sourcesContent":["import { Component, State, h, Watch, Prop, Event, EventEmitter } from '@stencil/core';\nimport { Checkout } from '../../../../types';\nimport { openWormhole } from 'stencil-wormhole';\nimport { __ } from '@wordpress/i18n';\nimport { isRtl } from '../../../../functions/page-align';\n\n@Component({\n  tag: 'sc-order-coupon-form',\n  styleUrl: 'sc-order-coupon-form.scss',\n  shadow: true,\n})\nexport class ScOrderCouponForm {\n  @Prop() label: string;\n  @Prop() loading: boolean;\n  @Prop() busy: boolean;\n  @Prop() error: any;\n  @Prop() order: Checkout;\n  @Prop() collapsed: boolean;\n  @Prop() placeholder: string;\n  @Prop() buttonText: string;\n\n  @State() open: boolean;\n  @State() value: string;\n  @State() errorMessage: string;\n\n  @Event() scApplyCoupon: EventEmitter<string>;\n\n  @Watch('error')\n  handleErrorsChange() {\n    const error = (this?.error?.additional_errors || []).find(error => error?.data?.attribute === 'discount.promotion_code');\n    this.errorMessage = error?.message ? error?.message : '';\n  }\n\n  render() {\n    return (\n      <sc-coupon-form\n        label={this.label || __('Add Coupon Code', 'surecart')}\n        collapsed={this.collapsed}\n        placeholder={this.placeholder}\n        loading={this.busy && !this.order?.line_items?.data?.length}\n        busy={this.busy}\n        error={this.errorMessage}\n        discount={this?.order?.discount}\n        currency={this?.order?.currency}\n        discount-amount={this?.order?.discount_amount}\n        class={{\n          'order-coupon-form--is-rtl': isRtl(),\n        }}\n        button-text={this.buttonText || __('Apply', 'surecart')}\n      ></sc-coupon-form>\n    );\n  }\n}\n\nopenWormhole(ScOrderCouponForm, ['loading', 'busy', 'order', 'error'], false);\n"]}