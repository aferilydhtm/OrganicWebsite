{"version":3,"file":"sc-payment.js","sourceRoot":"","sources":["../../../../../src/components/controllers/checkout-form/payment/sc-payment.tsx"],"names":[],"mappings":"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","sourcesContent":["import { Component, Element, Fragment, h, Host, Prop } from '@stencil/core';\nimport { __ } from '@wordpress/i18n';\nimport { state as checkoutState } from '@store/checkout';\nimport { state as processorsState } from '@store/processors';\nimport { state as selectedProcessor } from '@store/selected-processor';\nimport { ManualPaymentMethods } from './ManualPaymentMethods';\nimport { getAvailableProcessor, hasMultipleProcessorChoices, availableManualPaymentMethods, availableProcessors } from '@store/processors/getters';\n\n/**\n * @part base - The elements base wrapper.\n * @part form-control - The form control wrapper.\n * @part label - The input label.\n * @part help-text - Help text that describes how to use the input.\n * @part test-badge__base - Test badge base.\n * @part test-badge__content - Test badge content.\n */\n@Component({\n  tag: 'sc-payment',\n  styleUrl: 'sc-payment.scss',\n  shadow: true,\n})\nexport class ScPayment {\n  /** This element. */\n  @Element() el: HTMLScPaymentElement;\n\n  @Prop() stripePaymentElement: boolean;\n\n  /** Disabled processor types */\n  @Prop() disabledProcessorTypes: string[];\n\n  @Prop() secureNotice: string;\n\n  /** The input's label. */\n  @Prop() label: string;\n\n  /** Hide the test mode badge */\n  @Prop() hideTestModeBadge: boolean;\n\n  componentWillLoad() {\n    processorsState.disabled.processors = this.disabledProcessorTypes;\n  }\n\n  renderStripe(processor) {\n    return (\n      <sc-payment-method-choice key={processor?.id} processor-id=\"stripe\" card={this.stripePaymentElement}>\n        <span slot=\"summary\" class=\"sc-payment-toggle-summary\">\n          <sc-icon name=\"credit-card\" style={{ fontSize: '24px' }}></sc-icon>\n          <span>{__('Credit Card', 'surecart')}</span>\n        </span>\n\n        <div class=\"sc-payment__stripe-card-element\">\n          <slot name=\"stripe\" />\n        </div>\n      </sc-payment-method-choice>\n    );\n  }\n\n  renderPayPal(processor) {\n    const stripe = getAvailableProcessor('stripe');\n    return (\n      <Fragment>\n        <sc-payment-method-choice key={processor?.id} processor-id=\"paypal\">\n          <span slot=\"summary\" class=\"sc-payment-toggle-summary\">\n            <sc-icon name=\"paypal\" style={{ width: '80px', fontSize: '24px' }}></sc-icon>\n          </span>\n\n          <sc-card>\n            <sc-payment-selected label={__('PayPal selected for check out.', 'surecart')}>\n              <sc-icon slot=\"icon\" name=\"paypal\" style={{ width: '80px' }}></sc-icon>\n              {__('Another step will appear after submitting your order to complete your purchase details.', 'surecart')}\n            </sc-payment-selected>\n          </sc-card>\n        </sc-payment-method-choice>\n\n        {!stripe && (\n          <sc-payment-method-choice key={processor?.id} processor-id=\"paypal\" method-id=\"card\">\n            <span slot=\"summary\" class=\"sc-payment-toggle-summary\">\n              <sc-icon name=\"credit-card\" style={{ fontSize: '24px' }}></sc-icon>\n              <span>{__('Credit Card', 'surecart')}</span>\n            </span>\n\n            <sc-card>\n              <sc-payment-selected label={__('Credit Card selected for check out.', 'surecart')}>\n                <sc-icon name=\"credit-card\" slot=\"icon\" style={{ fontSize: '24px' }}></sc-icon>\n                {__('Another step will appear after submitting your order to complete your purchase details.', 'surecart')}\n              </sc-payment-selected>\n            </sc-card>\n          </sc-payment-method-choice>\n        )}\n      </Fragment>\n    );\n  }\n\n  render() {\n    // payment is not required for this order.\n    if (checkoutState.checkout?.payment_method_required === false) {\n      return null;\n    }\n\n    const Tag = hasMultipleProcessorChoices() || selectedProcessor?.id === 'paypal' ? 'sc-toggles' : 'div';\n    const mollie = getAvailableProcessor('mollie');\n\n    return (\n      <Host>\n        <sc-form-control label={this.label} exportparts=\"label, help-text, form-control\">\n          <div class=\"sc-payment-label\" slot=\"label\">\n            <div>{this.label}</div>\n            {checkoutState.mode === 'test' && !this.hideTestModeBadge && (\n              <sc-tag type=\"warning\" size=\"small\" exportparts=\"base:test-badge__base, content:test-badge__content\">\n                {__('Test Mode', 'surecart')}\n              </sc-tag>\n            )}\n          </div>\n\n          {mollie?.id ? (\n            <sc-checkout-mollie-payment processor-id={mollie?.id}></sc-checkout-mollie-payment>\n          ) : (\n            <Tag collapsible={false} theme=\"container\">\n              {!availableProcessors()?.length && !availableManualPaymentMethods()?.length && (\n                <sc-alert type=\"info\" open>\n                  {__('You do not have any processors enabled for this mode and cart. Please configure your processors.', 'surecart')}\n                </sc-alert>\n              )}\n              {(availableProcessors() || []).map(processor => {\n                switch (processor?.processor_type) {\n                  case 'stripe':\n                    return this.renderStripe(processor);\n                  case 'paypal':\n                    return this.renderPayPal(processor);\n                }\n              })}\n              <ManualPaymentMethods methods={availableManualPaymentMethods()} />\n            </Tag>\n          )}\n        </sc-form-control>\n      </Host>\n    );\n  }\n}\n"]}