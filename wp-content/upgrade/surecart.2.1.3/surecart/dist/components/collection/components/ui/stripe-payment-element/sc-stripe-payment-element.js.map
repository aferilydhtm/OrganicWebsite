{"version":3,"file":"sc-stripe-payment-element.js","sourceRoot":"","sources":["../../../../src/components/ui/stripe-payment-element/sc-stripe-payment-element.tsx"],"names":[],"mappings":"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","sourcesContent":["import { Component, Element, Event, EventEmitter, h, Method, Prop, State, Watch } from '@stencil/core';\nimport { Stripe } from '@stripe/stripe-js';\nimport { loadStripe } from '@stripe/stripe-js/pure';\nimport { __ } from '@wordpress/i18n';\nimport { addQueryArgs } from '@wordpress/url';\nimport { openWormhole } from 'stencil-wormhole';\nimport { state as selectedProcessor } from '@store/selected-processor';\n\nimport { Checkout, FormState, FormStateSetter, PaymentIntent, ProcessorName, ShippingAddress } from '../../../types';\n\n@Component({\n  tag: 'sc-stripe-payment-element',\n  styleUrl: 'sc-stripe-payment-element.scss',\n  shadow: false,\n})\nexport class ScStripePaymentElement {\n  @Element() el: HTMLScStripePaymentElementElement;\n  /** Holds the element container. */\n  private container: HTMLDivElement;\n  // holds the elements instance.\n  private elements: any;\n  // holds the stripe element.\n  private element: any;\n  // holds the stripe instance.\n  private stripe: Stripe;\n\n  /** The Payment Intent */\n  @Prop() stripePaymentIntent: PaymentIntent;\n\n  /** Order to watch */\n  @Prop() order: Checkout;\n\n  /** Should we collect an address? */\n  @Prop() address: boolean;\n\n  /** Success url to redirect. */\n  @Prop() successUrl: string;\n\n  /** The current form state. */\n  @Prop() formState: FormState;\n\n  /** The selected processor name. */\n  @Prop() selectedProcessorId: ProcessorName;\n\n  /** The error. */\n  @State() error: string;\n\n  /** Is this yet loaded. */\n  @State() loaded: boolean = false;\n\n  /** Are we confirming the order? */\n  @State() confirming: boolean = false;\n\n  /** The order/invoice was paid for. */\n  @Event() scPaid: EventEmitter<void>;\n\n  /** There was a payment error. */\n  @Event() scPayError: EventEmitter<any>;\n  /** Set the state */\n  @Event() scSetState: EventEmitter<FormStateSetter>;\n\n  /** Maybe load the stripe element on load. */\n  async componentDidLoad() {\n    this.initialize();\n  }\n\n  @Watch('stripePaymentIntent')\n  handleUpdatedChange(val, prev) {\n    this.error = '';\n\n    // client secret changed, reload the element\n    if (val?.processor_data?.stripe?.client_secret !== prev?.processor_data?.stripe?.client_secret) {\n      return this.initialize();\n    }\n\n    // otherwise, fetch element updates.\n    this.elements.fetchUpdates();\n  }\n\n  async initialize() {\n    // we need this data.\n    if (!this.stripePaymentIntent?.processor_data?.stripe?.publishable_key || !this.stripePaymentIntent?.processor_data?.stripe?.account_id) return;\n\n    // check if stripe has been initialized\n    if (!this.stripe) {\n      try {\n        this.stripe = await loadStripe(this.stripePaymentIntent?.processor_data?.stripe?.publishable_key, {\n          stripeAccount: this.stripePaymentIntent?.processor_data?.stripe?.account_id,\n        });\n      } catch (e) {\n        this.error = e?.message || __('Stripe could not be loaded', 'surecart');\n        // don't continue.\n        return;\n      }\n    }\n\n    // load the element.\n    this.loadElement();\n  }\n\n  @Watch('order')\n  @Watch('error')\n  handleUpdateElement() {\n    if (!this.element) return;\n    if (this.order?.status !== 'draft') return;\n    const { name, email } = this.order;\n    const { line_1: line1, line_2: line2, city, state, country, postal_code } = (this.order?.shipping_address as ShippingAddress) || {};\n    this.element.update({\n      defaultValues: {\n        billingDetails: {\n          name,\n          email,\n          address: {\n            line1,\n            line2,\n            city,\n            state,\n            country,\n            postal_code,\n          },\n        },\n      },\n      fields: {\n        billingDetails: {\n          email: 'never',\n        },\n      },\n    });\n    this.elements.fetchUpdates();\n  }\n\n  /**\n   * Watch order status and maybe confirm the order.\n   */\n  @Watch('formState')\n  async maybeConfirmOrder(val: FormState) {\n    // must be finalized\n    if (val !== 'paying') return;\n    // this processor is not selected.\n    if (selectedProcessor?.id !== 'stripe') return;\n    // must be a stripe session\n    if (this.order?.payment_intent?.processor_type !== 'stripe') return;\n    // need an external_type\n    if (!this.order?.payment_intent?.processor_data?.stripe?.type) return;\n    // confirm the intent.\n    return await this.confirm(this.order?.payment_intent?.processor_data?.stripe?.type);\n  }\n\n  @Method()\n  async confirm(type, args = {}) {\n    const confirmArgs = {\n      elements: this.elements,\n      confirmParams: {\n        return_url: addQueryArgs(window.location.href, {\n          ...(this.order.id ? { checkout_id: this.order.id } : {}),\n        }),\n        payment_method_data: {\n          billing_details: {\n            email: this.order.email,\n          },\n        },\n      },\n      redirect: 'if_required',\n      ...args,\n    };\n\n    // prevent possible double-charges\n    if (this.confirming) return;\n\n    // stripe must be loaded.\n    if (!this.stripe) return;\n\n    try {\n      this.scSetState.emit('PAYING');\n      const response = type === 'setup' ? await this.stripe.confirmSetup(confirmArgs as any) : await this.stripe.confirmPayment(confirmArgs as any);\n      if (response?.error) {\n        this.error = response.error.message;\n        throw response.error;\n      }\n      this.scSetState.emit('PAID');\n      // paid\n      this.scPaid.emit();\n    } catch (e) {\n      console.error(e);\n      this.scPayError.emit(e);\n      if (e.message) {\n        this.error = e.message;\n      }\n    } finally {\n      this.confirming = false;\n    }\n  }\n\n  loadElement() {\n    // we need a stripe instance and client secret.\n    if (!this.stripe || !this.stripePaymentIntent?.processor_data?.stripe?.client_secret || !this.container) {\n      console.log('do not have stripe or');\n      return;\n    }\n\n    // get the computed styles.\n    const styles = getComputedStyle(this.el);\n\n    // we have what we need, load elements.\n    this.elements = this.stripe.elements({\n      clientSecret: this.stripePaymentIntent?.processor_data?.stripe?.client_secret,\n      appearance: {\n        variables: {\n          colorPrimary: styles.getPropertyValue('--sc-color-primary-500'),\n          colorText: styles.getPropertyValue('--sc-input-label-color'),\n          borderRadius: styles.getPropertyValue('--sc-input-border-radius-medium'),\n          colorBackground: styles.getPropertyValue('--sc-input-background-color'),\n          fontSizeBase: styles.getPropertyValue('--sc-input-font-size-medium'),\n          colorLogo: styles.getPropertyValue('--sc-stripe-color-logo'),\n          colorLogoTab: styles.getPropertyValue('--sc-stripe-color-logo-tab'),\n          colorLogoTabSelected: styles.getPropertyValue('--sc-stripe-color-logo-tab-selected'),\n          colorTextPlaceholder: styles.getPropertyValue('--sc-input-placeholder-color'),\n        },\n        rules: {\n          '.Input': {\n            border: styles.getPropertyValue('--sc-input-border'),\n          },\n        },\n      },\n    });\n\n    const { line_1: line1, line_2: line2, city, state, country, postal_code } = (this.order?.shipping_address as ShippingAddress) || {};\n\n    // create the payment element.\n    this.elements\n      .create('payment', {\n        defaultValues: {\n          billingDetails: {\n            name: this.order?.name,\n            email: this.order?.email,\n            address: {\n              line1,\n              line2,\n              city,\n              state,\n              country,\n              postal_code,\n            },\n          },\n        },\n        fields: {\n          billingDetails: {\n            email: 'never',\n          },\n        },\n      })\n      .mount('.sc-payment-element-container');\n\n    this.element = this.elements.getElement('payment');\n    this.element.on('ready', () => (this.loaded = true));\n  }\n\n  render() {\n    return (\n      <div class=\"sc-stripe-payment-element\" data-testid=\"stripe-payment-element\">\n        {!!this.error && (\n          <sc-text\n            style={{\n              'color': 'var(--sc-color-danger-500)',\n              '--font-size': 'var(--sc-font-size-small)',\n              'marginBottom': '0.5em',\n            }}\n          >\n            {this.error}\n          </sc-text>\n        )}\n\n        <div class=\"loader\" hidden={this.loaded}>\n          <div class=\"loader__row\">\n            <div style={{ width: '50%' }}>\n              <sc-skeleton style={{ width: '50%', marginBottom: '0.5em' }}></sc-skeleton>\n              <sc-skeleton></sc-skeleton>\n            </div>\n            <div style={{ flex: '1' }}>\n              <sc-skeleton style={{ width: '50%', marginBottom: '0.5em' }}></sc-skeleton>\n              <sc-skeleton></sc-skeleton>\n            </div>\n            <div style={{ flex: '1' }}>\n              <sc-skeleton style={{ width: '50%', marginBottom: '0.5em' }}></sc-skeleton>\n              <sc-skeleton></sc-skeleton>\n            </div>\n          </div>\n          <div class=\"loader__details\">\n            <sc-skeleton style={{ height: '1rem' }}></sc-skeleton>\n            <sc-skeleton style={{ height: '1rem', width: '30%' }}></sc-skeleton>\n          </div>\n        </div>\n        <div hidden={!this.loaded} class=\"sc-payment-element-container\" ref={el => (this.container = el as HTMLDivElement)}></div>\n      </div>\n    );\n  }\n}\n\nopenWormhole(ScStripePaymentElement, ['order', 'selectedProcessorId', 'stripePaymentIntent', 'formState'], true);\n"]}