"use strict";const index=require("./index-261b56ec.js");var _a,_b,_c,_d,_e,_f,_g,_h,_j,_k,_l;const product=(null===(_b=null===(_a=null===window||void 0===window?void 0:window.scData)||void 0===_a?void 0:_a.product_data)||void 0===_b?void 0:_b.product)||null,prices=(null===(_c=null==product?void 0:product.prices)||void 0===_c?void 0:_c.data)||[],selectedPrice=(prices||[]).sort(((e,o)=>(null==e?void 0:e.position)-(null==o?void 0:o.position))).find((e=>!(null==e?void 0:e.archived))),adHocAmount=(null==selectedPrice?void 0:selectedPrice.amount)||null,store=index.createStore({formId:null===(_f=null===(_e=null===(_d=null===window||void 0===window?void 0:window.scData)||void 0===_d?void 0:_d.product_data)||void 0===_e?void 0:_e.form)||void 0===_f?void 0:_f.ID,mode:(null===(_h=null===(_g=null===window||void 0===window?void 0:window.scData)||void 0===_g?void 0:_g.product_data)||void 0===_h?void 0:_h.mode)||"live",product:product,prices:prices,quantity:1,selectedPrice:selectedPrice,total:null,dialog:null,busy:!1,disabled:(null==selectedPrice?void 0:selectedPrice.archived)||(null==product?void 0:product.archived),adHocAmount:adHocAmount,error:null,checkoutUrl:null===(_k=null===(_j=null===window||void 0===window?void 0:window.scData)||void 0===_j?void 0:_j.product_data)||void 0===_k?void 0:_k.checkout_link,line_item:{price_id:null==selectedPrice?void 0:selectedPrice.id,quantity:1,...(null==selectedPrice?void 0:selectedPrice.ad_hoc)?{ad_hoc_amount:adHocAmount}:{}}},((e,o)=>JSON.stringify(e)!==JSON.stringify(o))),{state:state,onChange:onChange,on:on,dispose:dispose,forceUpdate:forceUpdate}=store;(null===(_l=null===window||void 0===window?void 0:window.sc)||void 0===_l?void 0:_l.store)&&(window.sc.store.product=store),onChange("selectedPrice",(e=>{var o;state.total=state.adHocAmount||(null==e?void 0:e.amount)||0,state.adHocAmount=null==e?void 0:e.amount,state.disabled=(null==e?void 0:e.archived)||(null===(o=state.product)||void 0===o?void 0:o.archived)})),onChange("selectedPrice",(()=>setLineItem())),onChange("adHocAmount",(()=>setLineItem())),onChange("quantity",(()=>setLineItem()));const setLineItem=()=>{var e,o,d;state.line_item={price_id:null===(e=state.selectedPrice)||void 0===e?void 0:e.id,quantity:(null===(o=state.selectedPrice)||void 0===o?void 0:o.ad_hoc)?1:state.quantity,...(null===(d=state.selectedPrice)||void 0===d?void 0:d.ad_hoc)?{ad_hoc_amount:state.adHocAmount}:{}}};exports.dispose=dispose,exports.forceUpdate=forceUpdate,exports.on=on,exports.onChange=onChange,exports.state=state;