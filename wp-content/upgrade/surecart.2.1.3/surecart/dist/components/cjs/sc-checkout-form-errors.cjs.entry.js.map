{"file":"sc-checkout-form-errors.entry.cjs.js","mappings":";;;;;;;;;;;;;;;;aAuBa,UAAE;;;;;;;;;;;;;;;;;;;;;;;AAgCfA;;;;","names":["openWormhole"],"sources":["./src/components/controllers/checkout-form/checkout-form-errors/sc-checkout-form-errors.tsx"],"sourcesContent":["import { Component, h, Host, Prop } from '@stencil/core';\nimport { __ } from '@wordpress/i18n';\nimport { openWormhole } from 'stencil-wormhole';\n\nimport { FormState, ResponseError } from '../../../../types';\n\n/**\n * This component listens for a confirmed event and redirects to the success url.\n */\n@Component({\n  tag: 'sc-checkout-form-errors',\n  shadow: true,\n})\nexport class ScCheckoutFormErrors {\n  /** The current order. */\n  @Prop() checkoutState: FormState;\n\n  /** Error to display. */\n  @Prop() error: ResponseError | null;\n\n  /** This filters the error message with some more client friendly error messages. */\n  getErrorMessage(error) {\n    if (error.code === 'order.line_items.price.blank') {\n      return __('This product is no longer purchasable.', 'surecart');\n    }\n    return <span innerHTML={error?.message}></span>;\n  }\n\n  /** First will display validation error, then main error if no validation errors. */\n  errorMessage() {\n    if (this.error?.additional_errors?.[0]?.message) {\n      return this.getErrorMessage(this.error?.additional_errors?.[0]);\n    } else if (this?.error?.message) {\n      return this.getErrorMessage(this?.error);\n    }\n    return '';\n  }\n\n  render() {\n    // don't show component if no error message or is finalizing or updating.\n    if (!this.errorMessage() || ['finalizing', 'updating'].includes(this.checkoutState)) {\n      return <Host style={{ display: 'none' }}></Host>;\n    }\n\n    return (\n      <Host>\n        <sc-alert type=\"danger\" scrollOnOpen={true} open={!!this.errorMessage()}>\n          <span slot=\"title\">{this.errorMessage()}</span>\n        </sc-alert>\n        <slot />\n      </Host>\n    );\n  }\n}\n\nopenWormhole(ScCheckoutFormErrors, ['checkoutState', 'error'], false);\n"],"version":3}