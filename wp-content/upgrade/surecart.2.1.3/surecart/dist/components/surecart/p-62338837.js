import{a as o}from"./p-b6ef0098.js";import"./p-61ab3f3a.js";import{s as i}from"./p-7c27060f.js";import{a as d}from"./p-d8453138.js";import{a as t}from"./p-1c2e2695.js";import{g as n}from"./p-4d73f82a.js";const e="surecart/v1/checkouts/",a=["line_items","line_item.price","line_item.fees","price.product","customer","customer.shipping_address","payment_intent","discount","discount.promotion","recommended_bumps","bump.price","discount.coupon","shipping_address","staged_payment_intents","tax_identifier","manual_payment_method"],l=(d={})=>{var a,e,t,i;return{live_mode:"test"!==o.mode,group_key:o.groupId,abandoned_checkout_return_url:o.abandonedCheckoutReturnUrl||null,abandoned_checkout_enabled:o.abandonedCheckoutEnabled&&!!o.abandonedCheckoutReturnUrl,metadata:{...(null==d?void 0:d.metadata)||{},...(null===(a=null===window||void 0===window?void 0:window.scData)||void 0===a?void 0:a.page_id)&&{page_id:null===(e=null===window||void 0===window?void 0:window.scData)||void 0===e?void 0:e.page_id},...(null===(t=null==o?void 0:o.product)||void 0===t?void 0:t.id)&&{buy_page_product_id:null===(i=null==o?void 0:o.product)||void 0===i?void 0:i.id},page_url:window.location.href},...d}},u=(d={})=>{var a,e;return{...!!(null==o?void 0:o.formId)&&{form_id:null==o?void 0:o.formId},...!!(null===(a=null==o?void 0:o.product)||void 0===a?void 0:a.id)&&{product_id:null===(e=null==o?void 0:o.product)||void 0===e?void 0:e.id},...!!i.config.stripe.paymentElement&&{stage_processor_type:"stripe"},...d}},r=()=>{var d,a;return n(window.location.href,"checkout_id")||((null===(d=null==o?void 0:o.checkout)||void 0===d?void 0:d.id)?null===(a=null==o?void 0:o.checkout)||void 0===a?void 0:a.id:null)},s=(o,d="")=>{let i=o?`${e}${o}`:e;return i=`${i}${d}`,t(i,{expand:a})},c=async({id:o,query:a={}})=>await d({path:t(s(o),u(a))}),v=async({id:o=null,data:a={},query:e={}})=>(o=o||r(),await d({method:o?"PATCH":"POST",path:t(s(o),u(e)),data:l(a)})),p=async({id:o,data:a={},query:e={}})=>await d({method:"PATCH",path:t(s(o),u(e)),data:l(a)}),m=async({id:o,data:a={},query:e={},processor:i})=>await d({method:"POST",path:t(s(o,"/finalize"),u({...(null==i?void 0:i.manual)?{manual_payment:!0,manual_payment_method_id:null==i?void 0:i.id}:{processor_type:null==i?void 0:i.id},...e})),data:l(a)}),_=async({checkout:o,data:e,live_mode:i=!1})=>{if(!(null==o?void 0:o.id))return await d({method:"POST",path:t(s(null)),data:{line_items:[e],live_mode:i}});const n=await d({path:t("surecart/v1/line_items",{consolidate:!0,expand:[...(a||[]).map((o=>o.includes(".")?o:`checkout.${o}`)),"checkout"]}),method:"POST",data:{...e,checkout:o.id}});return null==n?void 0:n.checkout};export{_ as a,e as b,v as c,c as d,a as e,m as f,p as u};