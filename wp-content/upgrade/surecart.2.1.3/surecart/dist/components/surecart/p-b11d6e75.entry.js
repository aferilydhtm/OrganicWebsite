import{r as t,c as n,h as i}from"./p-25a9e68f.js";import{i as o}from"./p-d556eec7.js";import{g as s}from"./p-2907581f.js";import"./p-a586043b.js";const e=":host {\n  display: block;\n}\n\nsc-button {\n  color: var(--sc-color-primary-500);\n}\n\n.coupon-form {\n  position: relative;\n  container-type: inline-size;\n}\n.coupon-form .coupon-button {\n  opacity: 0;\n  visibility: hidden;\n  transform: scale(0.9);\n  transition: all var(--sc-transition-fast) ease;\n}\n.coupon-form .coupon-button-mobile {\n  margin-top: var(--sc-input-label-margin);\n  display: none;\n}\n.coupon-form--has-value .coupon-button {\n  opacity: 1;\n  visibility: visible;\n  transform: scale(1);\n}\n\n@container (max-width: 320px) {\n  .coupon-form .coupon-button {\n    display: none;\n  }\n  .coupon-form .coupon-button-mobile {\n    display: block;\n  }\n}\n.form {\n  opacity: 0;\n  visibility: hidden;\n  height: 0;\n  transform: translateY(5px);\n  transition: opacity var(--sc-transition-medium) ease, transform var(--sc-transition-medium) ease;\n  position: relative;\n  gap: var(--sc-spacing-small);\n}\n\n.coupon-form--is-open .form {\n  opacity: 1;\n  visibility: visible;\n  transform: translateY(0);\n  height: auto;\n  margin: var(--sc-spacing-small) 0;\n}\n.coupon-form--is-open .trigger {\n  display: none;\n}\n\n.trigger {\n  cursor: pointer;\n  font-size: var(--sc-font-size-small);\n  line-height: var(--sc-line-height-dense);\n  color: var(--sc-input-label-color);\n  user-select: none;\n}\n.trigger:hover {\n  text-decoration: underline;\n}\n\n.coupon-form--is-rtl .trigger {\n  text-align: right;\n}";const r=class{constructor(i){t(this,i);this.scApplyCoupon=n(this,"scApplyCoupon",7);this.label=undefined;this.loading=undefined;this.busy=undefined;this.placeholder=undefined;this.error=undefined;this.forceOpen=undefined;this.discount=undefined;this.currency=undefined;this.discountAmount=undefined;this.open=undefined;this.collapsed=undefined;this.value=undefined;this.buttonText=undefined}handleOpenChange(t){if(t){setTimeout((()=>this.input.triggerFocus()),50)}}handleBlur(){if(!this.value){this.open=false;this.error=""}}applyCoupon(){this.scApplyCoupon.emit(this.input.value.toUpperCase())}handleKeyDown(t){if((t===null||t===void 0?void 0:t.code)==="Enter"){this.applyCoupon()}}render(){var t,n,e,r,l,a,u;if(this.loading){return i("sc-skeleton",{style:{width:"120px",display:"inline-block"}})}if((n=(t=this===null||this===void 0?void 0:this.discount)===null||t===void 0?void 0:t.promotion)===null||n===void 0?void 0:n.code){let t="";if(((e=this===null||this===void 0?void 0:this.discount)===null||e===void 0?void 0:e.coupon)&&((r=this===null||this===void 0?void 0:this.discount)===null||r===void 0?void 0:r.coupon.percent_off)){t=s((l=this===null||this===void 0?void 0:this.discount)===null||l===void 0?void 0:l.coupon)}return i("sc-line-item",{exportparts:"description:info, price-description:discount, price:amount"},i("span",{slot:"description"},i("div",{part:"discount-label"},wp.i18n.__("Discount","surecart")),i("sc-tag",{exportparts:"base:coupon-tag",type:"success",class:"coupon-tag",clearable:true,onScClear:()=>{this.scApplyCoupon.emit(null);this.open=false}},(u=(a=this===null||this===void 0?void 0:this.discount)===null||a===void 0?void 0:a.promotion)===null||u===void 0?void 0:u.code)),t&&i("span",{class:"coupon-human-discount",slot:"price-description"},"(",t,")"),i("span",{slot:"price"},i("sc-format-number",{type:"currency",currency:this===null||this===void 0?void 0:this.currency,value:this===null||this===void 0?void 0:this.discountAmount})))}return this.collapsed?i("div",{part:"base",class:{"coupon-form":true,"coupon-form--is-open":this.open||this.forceOpen,"coupon-form--has-value":!!this.value,"coupon-form--is-rtl":o()}},i("div",{part:"label",class:"trigger",onMouseDown:()=>{if(this.open){return}this.open=true}},i("slot",{name:"label"},this.label)),i("div",{class:"form",part:"form"},i("sc-input",{exportparts:"base:input__base, input, form-control:input__form-control",value:this.value,onScInput:t=>this.value=t.target.value,placeholder:this.placeholder,onScBlur:()=>this.handleBlur(),onKeyDown:t=>this.handleKeyDown(t),ref:t=>this.input=t},i("sc-button",{exportparts:"base:button__base, label:button_label",slot:"suffix",type:"text",loading:this.busy,size:"medium",class:"coupon-button",onClick:()=>this.applyCoupon()},i("slot",null,this.buttonText))),i("sc-button",{exportparts:"base:button__base, label:button_label",type:"primary",outline:true,loading:this.busy,size:"medium",class:"coupon-button-mobile",onClick:()=>this.applyCoupon()},i("slot",null,this.buttonText)),!!this.error&&i("sc-alert",{exportparts:"base:error__base, icon:error__icon, text:error__text, title:error_title, message:error__message",type:"danger",open:true},i("span",{slot:"title"},this.error))),this.loading&&i("sc-block-ui",{exportparts:"base:block-ui, content:block-ui__content"})):i("div",{class:{"coupon-form":true,"coupon-form--has-value":!!this.value,"coupon-form--is-rtl":o()}},i("sc-input",{label:this.label,exportparts:"base:input__base, input, form-control:input__form-control",value:this.value,onScInput:t=>this.value=t.target.value,placeholder:this.placeholder,onScBlur:()=>this.handleBlur(),onKeyDown:t=>this.handleKeyDown(t),ref:t=>this.input=t},i("sc-button",{exportparts:"base:button__base, label:button_label",slot:"suffix",type:"text",loading:this.busy,size:"medium",class:"coupon-button",onClick:()=>this.applyCoupon()},i("slot",null,this.buttonText))),i("sc-button",{exportparts:"base:button__base, label:button_label",type:"primary",outline:true,loading:this.busy,size:"medium",class:"coupon-button-mobile",onClick:()=>this.applyCoupon()},i("slot",null,this.buttonText)),!!this.error&&i("sc-alert",{exportparts:"base:error__base, icon:error__icon, text:error__text, title:error_title, message:error__message",type:"danger",open:true},i("span",{slot:"title"},this.error)))}static get watchers(){return{open:["handleOpenChange"]}}};r.style=e;export{r as sc_coupon_form};
//# sourceMappingURL=p-b11d6e75.entry.js.map