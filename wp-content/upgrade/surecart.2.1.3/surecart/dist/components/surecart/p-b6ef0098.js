import{c as o}from"./p-db7ede86.js";import{g as n,b as t,a as e}from"./p-1c2e2695.js";function s(o){const e=o.indexOf("?");if(-1===e)return o;const i=n(o),s=o.substr(0,e);for(var r=arguments.length,d=new Array(r>1?r-1:0),c=1;c<r;c++)d[c-1]=arguments[c];d.forEach((t=>delete i[t]));const a=t(i);return a?s+"?"+a:s}const{state:i,onChange:c,on:r,set:d,get:l,dispose:u}=o({formId:null,groupId:null,mode:"live",locks:[],product:null,checkout:null,currencyCode:"usd",abandonedCheckoutReturnUrl:null,abandonedCheckoutEnabled:!0},((t,o)=>JSON.stringify(t)!==JSON.stringify(o))),a=(t,o)=>{try{return JSON.parse(t.getItem(o))}catch{return null}},v=t=>{let o=!1;return()=>{o||(o=!0,setTimeout((()=>{t(),o=!1}),0))}},w=(t,e,n,i=!1)=>{var s;const r=o(null!==(s=a(t,e))&&void 0!==s?s:n,((t,o)=>JSON.stringify(t)!==JSON.stringify(o))),d=v((()=>t.setItem(e,JSON.stringify(r.state))));return d(),i&&window.addEventListener("storage",(()=>{const o=a(t,e);if(null!==o)for(const t in o)r.set(t,o[t])})),r.use({set:d,reset:d}),r},f=(t,o,e=!1)=>w(localStorage,t,o,e);var h;const m=(null===(h=null===window||void 0===window?void 0:window.scData)||void 0===h?void 0:h.do_not_persist_cart)?o({live:{},test:{}}):f("surecart-local-storage",{live:{},test:{}},!0);window.scStore=m;const g=(t,o)=>{var e;return(null===(e=m.state[o])||void 0===e?void 0:e[t])||{}},k=g,p=(t,o)=>{var n;const s=(null==t?void 0:t.live_mode)?"live":"test";m.set(s,{...m.state[s],[o]:t}),i.formId===o&&i.mode===s&&(i.checkout=t),(null===(n=null===window||void 0===window?void 0:window.scData)||void 0===n?void 0:n.do_not_persist_cart)&&(null==t?void 0:t.id)&&window.history.replaceState({},document.title,e(window.location.href,{checkout_id:null==t?void 0:t.id}))},S=p,b=(t,o)=>{const{[t]:e,...n}=m.state[o];return window.history.replaceState({},document.title,s(window.location.href,"redirect_status","coupon","line_items","confirm_checkout_id","checkout_id")),m.set(o,n)},J=b;c("checkout",(t=>S(t,i.formId))),r("get",(t=>{if("checkout"===t){const t=k(i.formId,i.mode);(null==t?void 0:t.id)&&(i.checkout=t)}}));export{i as a,k as b,m as c,b as d,S as e,r as f,g,J as h,c as o,s as r,p as s};