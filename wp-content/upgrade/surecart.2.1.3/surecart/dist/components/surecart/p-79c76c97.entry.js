import{r as o,c as i,h as s,F as t}from"./p-25a9e68f.js";import{s as e}from"./p-4c5e6c8d.js";import"./p-61ab3f3a.js";import{s as l,c as r,d,b as n}from"./p-7c27060f.js";import{f as a,a as c}from"./p-b6ef0098.js";import{a as u}from"./p-c0bd2731.js";import{l as m,u as p}from"./p-d9c06e90.js";import{a as v}from"./p-d8453138.js";import{M as h}from"./p-45c8a84f.js";import{a as f}from"./p-1c2e2695.js";import"./p-db7ede86.js";import"./p-6c2a2148.js";const y=(o,i,s)=>a("set",((t,e,l)=>{if(t!==o)return;if(Array.isArray(i)){if(i.some((o=>JSON.stringify(e===null||e===void 0?void 0:e[o])!==JSON.stringify(l===null||l===void 0?void 0:l[o])))){return s(e,l)}}if(typeof i==="string"){if(JSON.stringify(e===null||e===void 0?void 0:e[i])===JSON.stringify(l===null||l===void 0?void 0:l[i]))return;return s(e===null||e===void 0?void 0:e[i],l===null||l===void 0?void 0:l[i])}}));const b=":host{display:block}";const g=class{constructor(s){o(this,s);this.scError=i(this,"scError",7);this.processorId=undefined;this.method=undefined;this.error=undefined;this.methods=undefined}componentWillLoad(){e.id="mollie";this.fetchMethods();y("checkout",["total_amount","currency","reusabled_payment_method_required","shipping_address"],(()=>this.fetchMethods()))}async fetchMethods(){var o;const i=c.checkout;if(!(i===null||i===void 0?void 0:i.currency)||!(i===null||i===void 0?void 0:i.total_amount))return;try{m("methods");const s=await v({path:f(`surecart/v1/processors/${this.processorId}/payment_method_types`,{amount:i===null||i===void 0?void 0:i.total_amount,country:((o=i===null||i===void 0?void 0:i.shipping_address)===null||o===void 0?void 0:o.country)||"us",currency:i===null||i===void 0?void 0:i.currency,...(i===null||i===void 0?void 0:i.reusable_payment_method_required)?{reusable:i===null||i===void 0?void 0:i.reusable_payment_method_required}:{},per_page:100})});l.methods=(s===null||s===void 0?void 0:s.data)||[]}catch(o){this.scError.emit(o);console.error(o)}finally{p("methods")}}renderLoading(){return s("sc-card",null,s("sc-skeleton",{style:{width:"50%",marginBottom:"0.5em"}}),s("sc-skeleton",{style:{width:"30%",marginBottom:"0.5em"}}),s("sc-skeleton",{style:{width:"60%",marginBottom:"0.5em"}}))}render(){var o,i,e;if(u("methods")&&!((o=r())===null||o===void 0?void 0:o.length)){return this.renderLoading()}if(!((i=c.checkout)===null||i===void 0?void 0:i.currency)){return this.renderLoading()}if(!((e=r())===null||e===void 0?void 0:e.length)){return s("sc-alert",{type:"warning",open:true},wp.i18n.__("No available payment methods","surecart")," ")}const l=d()?"sc-toggles":"div";return s(t,null,s(l,{collapsible:false,theme:"container"},(r()||[]).map((o=>s("sc-payment-method-choice",{"processor-id":"mollie","method-id":o===null||o===void 0?void 0:o.id,key:o===null||o===void 0?void 0:o.id},s("span",{slot:"summary",class:"sc-payment-toggle-summary"},!!(o===null||o===void 0?void 0:o.image)&&s("img",{src:o===null||o===void 0?void 0:o.image}),s("span",null,o===null||o===void 0?void 0:o.description)),s("sc-card",null,s("sc-payment-selected",{label:wp.i18n.sprintf(wp.i18n.__("%s selected for check out.","surecart"),o===null||o===void 0?void 0:o.description)},!!(o===null||o===void 0?void 0:o.image)&&s("img",{slot:"icon",src:o===null||o===void 0?void 0:o.image,style:{width:"32px"}}),wp.i18n.__("Another step will appear after submitting your order to complete your purchase details.","surecart")))))),s(h,{methods:n()})),!!u("methods")&&s("sc-block-ui",{class:"busy-block-ui","z-index":9,style:{"--sc-block-ui-opacity":"0.4"}}))}};g.style=b;export{g as sc_checkout_mollie_payment};
//# sourceMappingURL=p-79c76c97.entry.js.map