{"version":3,"names":["scProductBuyButtonCss","ScProductBuyButton","handleCartClick","e","preventDefault","state","busy","_a","selectedPrice","ad_hoc","dialog","submitCartForm","render","h","Host","class","disabled","onClick","this"],"sources":["./src/components/controllers/product/sc-product-buy-button/sc-product-buy-button.scss?tag=sc-product-buy-button","./src/components/controllers/product/sc-product-buy-button/sc-product-buy-button.tsx"],"sourcesContent":["sc-product-buy-button {\n  position: relative;\n\n  a.wp-block-button__link {\n    position: relative;\n    text-decoration: none;\n  }\n\n  sc-spinner::part(base) {\n    --indicator-color: currentColor;\n    --spinner-size: 12px;\n    position: absolute;\n    top: calc(50% - var(--spinner-size) + (var(--spinner-size) / 4));\n    left: calc(50% - var(--spinner-size) + (var(--spinner-size) / 4));\n  }\n\n  [data-text],\n  [data-loader] {\n    transition: opacity var(--sc-transition-fast) ease-in-out, visibility var(--sc-transition-fast) ease-in-out;\n  }\n\n  [data-loader] {\n    opacity: 0;\n    visibility: hidden;\n  }\n\n  &.is-disabled {\n    pointer-events: none;\n  }\n\n  &.is-busy {\n    [data-text] {\n      opacity: 0;\n      visibility: hidden;\n    }\n    [data-loader] {\n      opacity: 1;\n      visibility: visible;\n    }\n  }\n}\n","import { Component, Element, h, Host } from '@stencil/core';\nimport { state } from '@store/product';\nimport { __ } from '@wordpress/i18n';\nimport { submitCartForm } from '@store/product/mutations';\n\n@Component({\n  tag: 'sc-product-buy-button',\n  styleUrl: 'sc-product-buy-button.scss',\n  shadow: false,\n})\nexport class ScProductBuyButton {\n  @Element() el: HTMLScProductBuyButtonElement;\n\n  handleCartClick(e) {\n    e.preventDefault();\n\n    // already busy, do nothing.\n    if (state.busy) return;\n\n    // ad hoc price, use the dialog.\n    if (state?.selectedPrice?.ad_hoc) {\n      return (state.dialog = 'ad_hoc');\n    }\n\n    // submit the cart form.\n    submitCartForm();\n  }\n\n  render() {\n    return (\n      <Host class={{ 'is-busy': state.busy, 'is-disabled': state.disabled }} onClick={e => this.handleCartClick(e)}>\n        <slot />\n      </Host>\n    );\n  }\n}\n"],"mappings":"yYAAA,MAAMA,EAAwB,qyB,MCUjBC,EAAkB,M,yBAG7BC,gBAAgBC,G,MACdA,EAAEC,iBAGF,GAAIC,EAAMC,KAAM,OAGhB,IAAIC,EAAAF,IAAK,MAALA,SAAK,SAALA,EAAOG,iBAAa,MAAAD,SAAA,SAAAA,EAAEE,OAAQ,CAChC,OAAQJ,EAAMK,OAAS,Q,CAIzBC,G,CAGFC,SACE,OACEC,EAACC,EAAI,CAACC,MAAO,CAAE,UAAWV,EAAMC,KAAM,cAAeD,EAAMW,UAAYC,QAASd,GAAKe,KAAKhB,gBAAgBC,IACxGU,EAAA,a"}