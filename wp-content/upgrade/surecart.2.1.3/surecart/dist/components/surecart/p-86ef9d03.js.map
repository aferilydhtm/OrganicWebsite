{"version":3,"names":["submitCartForm","async","_a","state","selectedPrice","id","_b","ad_hoc","adHocAmount","busy","checkout","addLineItem","getCheckout","formId","mode","data","price","_c","_d","ad_hoc_amount","quantity","_e","live_mode","setCheckout","toggleCart","dialog","e","console","error"],"sources":["./src/store/product/mutations.ts"],"sourcesContent":["import { addLineItem } from '../../services/session';\nimport state from './store';\nimport { getCheckout, setCheckout } from '@store/checkouts';\nimport { Checkout } from 'src/types';\nimport { toggleCart } from '@store/ui';\n\nexport const submitCartForm = async () => {\n  if (!state.selectedPrice?.id) return;\n  if (state.selectedPrice?.ad_hoc && !state.adHocAmount) return;\n  try {\n    state.busy = true;\n    const checkout = await addLineItem({\n      checkout: getCheckout(state?.formId, state.mode),\n      data: {\n        price: state.selectedPrice?.id,\n        ...(state.selectedPrice?.ad_hoc ? { ad_hoc_amount: state.adHocAmount } : {}),\n        quantity: state.selectedPrice?.ad_hoc ? 1 : state.quantity,\n      },\n      live_mode: state.mode !== 'test',\n    });\n    setCheckout(checkout as Checkout, state.formId);\n    toggleCart(true);\n    state.dialog = null;\n  } catch (e) {\n    console.error(e);\n    state.error = e;\n  } finally {\n    state.busy = false;\n  }\n};\n"],"mappings":"6JAMaA,EAAiBC,U,cAC5B,MAAKC,EAAAC,EAAMC,iBAAa,MAAAF,SAAA,SAAAA,EAAEG,IAAI,OAC9B,KAAIC,EAAAH,EAAMC,iBAAa,MAAAE,SAAA,SAAAA,EAAEC,UAAWJ,EAAMK,YAAa,OACvD,IACEL,EAAMM,KAAO,KACb,MAAMC,QAAiBC,EAAY,CACjCD,SAAUE,EAAYT,IAAK,MAALA,SAAK,SAALA,EAAOU,OAAQV,EAAMW,MAC3CC,KAAM,CACJC,OAAOC,EAAAd,EAAMC,iBAAa,MAAAa,SAAA,SAAAA,EAAEZ,QACxBa,EAAAf,EAAMC,iBAAa,MAAAc,SAAA,SAAAA,EAAEX,QAAS,CAAEY,cAAehB,EAAMK,aAAgB,GACzEY,WAAUC,EAAAlB,EAAMC,iBAAa,MAAAiB,SAAA,SAAAA,EAAEd,QAAS,EAAIJ,EAAMiB,UAEpDE,UAAWnB,EAAMW,OAAS,SAE5BS,EAAYb,EAAsBP,EAAMU,QACxCW,EAAW,MACXrB,EAAMsB,OAAS,I,CACf,MAAOC,GACPC,QAAQC,MAAMF,GACdvB,EAAMyB,MAAQF,C,SAEdvB,EAAMM,KAAO,K"}