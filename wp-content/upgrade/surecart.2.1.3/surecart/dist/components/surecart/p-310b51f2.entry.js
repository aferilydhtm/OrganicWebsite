import{r as t,h as i,a as s}from"./p-25a9e68f.js";import{a as e}from"./p-d8453138.js";import{a,g as r}from"./p-1c2e2695.js";const n=".product-item-list {\n  display: grid;\n  grid-template-columns: repeat(var(--sc-product-item-list-column), 1fr);\n  gap: var(--sc-product-item-list-gap);\n}\n.product-item-list__wrapper {\n  container-type: inline-size;\n  display: grid;\n  gap: var(--sc-spacing-medium);\n}\n@container (max-width: 576px) {\n  .product-item-list__wrapper .product-item-list {\n    grid-template-columns: 1fr;\n  }\n}\n@container (min-width: 576px) and (max-width: 768px) {\n  .product-item-list__wrapper .product-item-list {\n    grid-template-columns: repeat(3, 1fr);\n  }\n}\n.product-item-list__sort, .product-item-list__empty, .product-item-list__search {\n  font-size: 16px;\n}\n.product-item-list__search {\n  display: flex;\n  align-items: center;\n  gap: var(--sc-spacing-small);\n}\n.product-item-list__header {\n  display: flex;\n  flex-wrap: wrap;\n  justify-content: space-between;\n  align-items: center;\n}\n.product-item-list__loader {\n  display: grid;\n  gap: 0.88rem;\n  padding-top: var(--sc-product-item-padding-top);\n  padding-bottom: var(--sc-product-item-padding-bottom);\n  padding-left: var(--sc-product-item-padding-left);\n  padding-right: var(--sc-product-item-padding-right);\n  margin-top: var(--sc-product-item-margin-top);\n  margin-bottom: var(--sc-product-item-margin-bottom);\n  margin-left: var(--sc-product-item-margin-left);\n  margin-right: var(--sc-product-item-margin-right);\n  border: solid var(--sc-product-item-border-width) var(--sc-product-item-border-color);\n  border-radius: var(--sc-product-item-border-radius);\n  color: var(--sc-product-title-text-color);\n  background-color: var(--sc-product-item-background-color);\n  line-height: 1;\n}\n.product-item-list__pagination {\n  padding: 40px 0 0;\n  width: 100%;\n  font-size: var(--sc-font-size-small, var(--wp--preset--font-size--x-small));\n}\n.product-item-list__search-tag {\n  display: flex;\n  align-items: center;\n  gap: var(--sc-spacing-small);\n}\n.product-item-list__search-label {\n  font-size: var(--sc-font-size-small, var(--wp--preset--font-size--x-small));\n}\n\n.search-button,\n.clear-button {\n  opacity: 0;\n  visibility: hidden;\n  transition: opacity var(--sc-transition-medium) ease-in-out;\n  cursor: pointer;\n}\n\n.product-item-list__has-search .search-button,\n.product-item-list__has-search .clear-button {\n  opacity: 1;\n  visibility: visible;\n}\n\nsc-product-item::part(image) {\n  aspect-ratio: var(--sc-product-image-aspect-ratio);\n}\n\nsc-pagination {\n  font-size: var(--sc-pagination-font-size);\n}";const c=class{constructor(i){t(this,i);this.ids=undefined;this.sort="created_at:desc";this.query=undefined;this.searchEnabled=true;this.sortEnabled=true;this.paginationEnabled=true;this.ajaxPagination=true;this.paginationAutoScroll=true;this.layoutConfig=undefined;this.paginationAlignment="center";this.limit=15;this.products=undefined;this.loading=false;this.busy=false;this.currentPage=1;this.currentQuery=undefined;this.pagination={total:0,total_pages:0}}componentWillLoad(){this.getProducts()}doPagination(t){if(this.ajaxPagination){this.currentPage=t;this.updateProducts();this.paginationAutoScroll&&this.el.scrollIntoView({behavior:"smooth"});return}const i=a(location.href,{"product-page":t});window.location.replace(i)}async getProducts(){const{"product-page":t}=r(window.location.href);this.currentPage=this.paginationEnabled&&t?parseInt(t):1;try{this.loading=true;await this.fetchProducts()}catch(t){console.error(t)}finally{this.loading=false}}async handleSortChange(){this.currentPage=1;this.updateProducts()}async updateProducts(){try{this.busy=true;await this.fetchProducts()}catch(t){console.error(t)}finally{this.busy=false}}handleIdsChange(){if(this.debounce!==null){clearTimeout(this.debounce);this.debounce=null}this.debounce=window.setTimeout((()=>{this.updateProducts();this.debounce=null}),200)}async fetchProducts(){var t;const i=await e({path:a(`surecart/v1/products/`,{expand:["prices","product_medias","product_media.media"],archived:false,status:["published"],per_page:this.limit,page:this.currentPage,sort:this.sort,...((t=this.ids)===null||t===void 0?void 0:t.length)?{ids:this.ids}:{},...this.query?{query:this.query}:{}}),parse:false});this.currentQuery=this.query;this.pagination={total:parseInt(i.headers.get("X-WP-Total")),total_pages:parseInt(i.headers.get("X-WP-TotalPages"))};this.products=await i.json()}renderSortName(){switch(this.sort){case"created_at:desc":return wp.i18n.__("Latest","surecart");case"created_at:asc":return wp.i18n.__("Oldest","surecart");case"name:asc":return wp.i18n.__("Alphabetical, A-Z","surecart");case"name:desc":return wp.i18n.__("Alphabetical, Z-A","surecart");default:return wp.i18n.__("Sort","surecart")}}render(){var t,s,e,a;return i("div",{class:{"product-item-list__wrapper":true,"product-item-list__has-search":!!this.query}},(this.searchEnabled||this.sortEnabled)&&i("div",{class:"product-item-list__header"},i("div",{class:"product-item-list__sort"},this.sortEnabled&&i("sc-dropdown",{style:{"--panel-width":"15rem"}},i("sc-button",{type:"text",caret:true,slot:"trigger"},this.renderSortName()),i("sc-menu",null,i("sc-menu-item",{onClick:()=>this.sort="created_at:desc"},wp.i18n.__("Latest","surecart")),i("sc-menu-item",{onClick:()=>this.sort="created_at:asc"},wp.i18n.__("Oldest","surecart")),i("sc-menu-item",{onClick:()=>this.sort="name:asc"},wp.i18n.__("Alphabetical, A-Z","surecart")),i("sc-menu-item",{onClick:()=>this.sort="name:desc"},wp.i18n.__("Alphabetical, Z-A","surecart"))))),i("div",{class:"product-item-list__search"},this.searchEnabled&&(((t=this.query)===null||t===void 0?void 0:t.length)&&this.query===this.currentQuery?i("div",{class:"product-item-list__search-tag"},i("div",{class:"product-item-list__search-label"},wp.i18n.__("Search Results:","surecart")),i("sc-tag",{clearable:true,onScClear:()=>{this.query="";this.currentQuery="";this.updateProducts()}},this.query)):i("sc-input",{type:"text",placeholder:"Search",size:"small",onKeyDown:t=>{if(t.key==="Enter"){this.updateProducts()}},value:this.query,onScInput:t=>this.query=t.target.value},this.query?i("sc-icon",{class:"clear-button",slot:"prefix",name:"x",onClick:()=>{this.query=""}}):i("sc-icon",{slot:"prefix",name:"search"}),i("sc-button",{class:"search-button",type:"link",slot:"suffix",busy:this.busy,onClick:()=>this.updateProducts()},wp.i18n.__("Search","surecart")))))),!((s=this.products)===null||s===void 0?void 0:s.length)&&!this.loading&&i("sc-empty",{class:"product-item-list__empty",icon:"shopping-bag"},wp.i18n.__("No products found.","surecart")),i("div",{class:"product-item-list"},this.loading?[...Array(((e=this.ids)===null||e===void 0?void 0:e.length)||this.limit||10)].map((()=>{var t;return i("div",{class:"product-item-list__loader"},(t=this.layoutConfig)===null||t===void 0?void 0:t.map((t=>{var s,e;switch(t.blockName){case"surecart/product-item-title":return i("div",{style:{textAlign:"var(--sc-product-title-align)"}},i("sc-skeleton",{style:{width:"80%",display:"inline-block"}}));case"surecart/product-item-image":return i("sc-skeleton",{style:{width:"100%",minHeight:"90%",aspectRatio:(e=(s=t.attributes)===null||s===void 0?void 0:s.ratio)!==null&&e!==void 0?e:"1/1.4","--sc-border-radius-pill":"12px",display:"inline-block"}});case"surecart/product-item-price":return i("div",{style:{textAlign:"var(--sc-product-price-align)"}},i("sc-skeleton",{style:{width:"40%",display:"inline-block"}}));default:return null}})))})):(this.products||[]).map((t=>i("sc-product-item",{exportparts:"title, price, image",product:t,layoutConfig:this.layoutConfig})))),!!((a=this.products)===null||a===void 0?void 0:a.length)&&this.pagination.total>this.products.length&&this.paginationEnabled&&i("div",{class:{"product-item-list__pagination":true,"--is-aligned-left":this.paginationAlignment==="left","--is-aligned-center":this.paginationAlignment==="center","--is-aligned-right":this.paginationAlignment==="right"}},i("sc-pagination",{page:this.currentPage,perPage:this.limit,total:this.pagination.total,totalPages:this.pagination.total_pages,totalShowing:this.limit,onScNextPage:()=>this.doPagination(this.currentPage+1),onScPrevPage:()=>this.doPagination(this.currentPage-1)})),(this.busy||this.loading)&&i("sc-block-ui",null))}get el(){return s(this)}static get watchers(){return{sort:["handleSortChange"],ids:["handleIdsChange"],limit:["handleIdsChange"]}}};c.style=n;export{c as sc_product_item_list};
//# sourceMappingURL=p-310b51f2.entry.js.map