import{r as i,c as l,h as o}from"./p-25a9e68f.js";import{o as e}from"./p-c728334f.js";import{h as t}from"./p-afcbd440.js";import{i as d}from"./p-2907581f.js";import"./p-a586043b.js";const n=":host{display:block}:slotted(*~*){margin-top:20px}.line-items{display:grid;gap:var(--sc-form-row-spacing)}.line-item{display:grid;gap:var(--sc-spacing-small)}.fee__description{opacity:0.75}";const s=class{constructor(o){i(this,o);this.scUpdateLineItem=l(this,"scUpdateLineItem",7);this.scRemoveLineItem=l(this,"scRemoveLineItem",7);this.order=undefined;this.busy=undefined;this.prices=undefined;this.editable=undefined;this.removable=undefined;this.editLineItems=true;this.removeLineItems=true;this.lockedChoices=[]}updateQuantity(i,l){this.scUpdateLineItem.emit({price_id:i.price.id,quantity:l})}removeLineItem(i){this.scRemoveLineItem.emit({price_id:i.price.id,quantity:1})}getName(i){var l,o,e,t,d;const n=Object.keys(this.prices||{}).filter((l=>{const o=this.prices[l];return o.product===i.price.product.id}));let s="";if(n.length>1){s=`${(o=(l=i===null||i===void 0?void 0:i.price)===null||l===void 0?void 0:l.product)===null||o===void 0?void 0:o.name} â€“ ${(e=i===null||i===void 0?void 0:i.price)===null||e===void 0?void 0:e.name}`}else{s=(d=(t=i===null||i===void 0?void 0:i.price)===null||t===void 0?void 0:t.product)===null||d===void 0?void 0:d.name}return s}isLocked(i){return this.lockedChoices.some((l=>l.id===i.price.id))}isEditable(i){var l;if((l=i===null||i===void 0?void 0:i.price)===null||l===void 0?void 0:l.ad_hoc){return false}if(i===null||i===void 0?void 0:i.bump_amount){return false}if(this.editable!==null)return this.editable;return this.editLineItems}isRemovable(){if(this.removable!==null)return this.removable;return this.removeLineItems}render(){var i,l,e,n,s;if(!!this.busy&&!((e=(l=(i=this.order)===null||i===void 0?void 0:i.line_items)===null||l===void 0?void 0:l.data)===null||e===void 0?void 0:e.length)){return o("sc-line-item",null,o("sc-skeleton",{style:{width:"50px",height:"50px","--border-radius":"0"},slot:"image"}),o("sc-skeleton",{slot:"title",style:{width:"120px",display:"inline-block"}}),o("sc-skeleton",{slot:"description",style:{width:"60px",display:"inline-block"}}),o("sc-skeleton",{style:{width:"120px",display:"inline-block"},slot:"price"}),o("sc-skeleton",{style:{width:"60px",display:"inline-block"},slot:"price-description"}))}return o("div",{class:"line-items"},(((s=(n=this.order)===null||n===void 0?void 0:n.line_items)===null||s===void 0?void 0:s.data)||[]).sort(((i,l)=>{var o,e,t,d;if(((o=i.price)===null||o===void 0?void 0:o.id)<((e=l.price)===null||e===void 0?void 0:e.id))return-1;return((t=i.price)===null||t===void 0?void 0:t.id)>((d=l.price)===null||d===void 0?void 0:d.id)?1:0})).map((i=>{var l,e,n,s,v,r,u,a,c,h;return o("div",{class:"line-item"},o("sc-product-line-item",{key:i.id,imageUrl:(e=(l=i===null||i===void 0?void 0:i.price)===null||l===void 0?void 0:l.product)===null||e===void 0?void 0:e.image_url,name:(s=(n=i===null||i===void 0?void 0:i.price)===null||n===void 0?void 0:n.product)===null||s===void 0?void 0:s.name,max:(r=(v=i===null||i===void 0?void 0:i.price)===null||v===void 0?void 0:v.product)===null||r===void 0?void 0:r.purchase_limit,editable:this.isEditable(i),removable:this.isRemovable(),quantity:i.quantity,fees:(u=i===null||i===void 0?void 0:i.fees)===null||u===void 0?void 0:u.data,setupFeeTrialEnabled:(a=i===null||i===void 0?void 0:i.price)===null||a===void 0?void 0:a.setup_fee_trial_enabled,amount:i.ad_hoc_amount!==null?i.ad_hoc_amount:i.subtotal_amount,scratchAmount:i.ad_hoc_amount==null&&(i===null||i===void 0?void 0:i.scratch_amount),currency:(c=this.order)===null||c===void 0?void 0:c.currency,trialDurationDays:(h=i===null||i===void 0?void 0:i.price)===null||h===void 0?void 0:h.trial_duration_days,interval:!!(i===null||i===void 0?void 0:i.price)&&d(i===null||i===void 0?void 0:i.price,{showOnce:t(this.order)}),onScUpdateQuantity:l=>this.updateQuantity(i,l.detail),onScRemove:()=>this.removeLineItem(i)}))})))}};e(s,["order","busy","prices","lockedChoices","editLineItems","removeLineItems"],false);s.style=n;export{s as sc_line_items};
//# sourceMappingURL=p-f249025c.entry.js.map